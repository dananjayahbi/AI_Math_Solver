/* Fixes for React-Draggable issues */
.react-draggable {
  position: absolute !important;
  z-index: 100 !important;
  pointer-events: auto !important;
  touch-action: none !important;
  user-select: none !important;
}

.react-draggable-dragging {
  z-index: 1000 !important;
  cursor: grabbing !important;
  pointer-events: auto !important;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3) !important;
}

/* Make sure drag handle is prominent */
.drag-handle {
  cursor: grab !important;
  user-select: none !important;
  touch-action: none !important;
  height: 24px !important;
  width: 100% !important;
  position: relative;
  background-color: rgba(59, 130, 246, 0.1) !important;
}

.drag-handle:active,
.drag-handle:hover {
  cursor: grabbing !important;
  background-color: rgba(59, 130, 246, 0.3) !important;
}

/* Fix for z-index stacking context issues */
#latex-container {
  position: absolute !important;
  pointer-events: none !important; /* Container should pass through events */
  top: 4rem !important;
  left: 0 !important;
  width: 100% !important;
  height: calc(100vh - 4rem) !important;
  z-index: 20 !important;
  overflow: visible !important;
}

/* Effect for dragging */
.dragging {
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3) !important;
  opacity: 0.95 !important;
  transform: scale(1.02) !important;
  cursor: grabbing !important;
  z-index: 1000 !important;
}

/* Ensure the answer container can receive pointer events */
[id^="latex-container-"] {
  pointer-events: auto !important;
  touch-action: none !important;
  position: absolute !important;
  z-index: 30 !important;
}

/* Make sure answer container can be interacted with */
.latex-answer-container {
  pointer-events: auto !important;
  z-index: 30 !important;
}

/* Clear z-index hierarchy to avoid conflicts */
#canvas {
  z-index: 10 !important; /* Drawing canvas when active */
}

#selectionCanvas {
  z-index: 15 !important; /* Selection canvas when active */
}

#latex-container {
  z-index: 20 !important; /* Container for latex answers */
}

.react-draggable {
  z-index: 30 !important; /* Individual draggable items */
}

.react-draggable-dragging {
  z-index: 1000 !important; /* Active dragging */
}
